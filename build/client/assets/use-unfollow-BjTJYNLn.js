import{u,a as l,i as c}from"./api-C3WgiByt.js";import{u as y,t as a}from"./QueryClientProvider-Y79vg6s4.js";import{u as w}from"./authStore-BusQRGVs.js";function g(){const{user:o}=w();if(!(o==null?void 0:o.id))throw new Error("user not found");const t=y(),{isPending:s,mutateAsync:n}=u({mutationKey:["follow"],mutationFn:async e=>(console.log("followedIDDTO",e),(await l.post("/follows",e)).data),onError:e=>{var r;if(c(e))return a.create({title:(r=e.response)==null?void 0:r.data.message,type:"error"});a.create({title:"Something went wrong!",type:"error"})},onSuccess:async()=>{Promise.all([await t.invalidateQueries({queryKey:["followers"]}),await t.invalidateQueries({queryKey:["following"]}),await t.invalidateQueries({queryKey:["check-auth"]}),await t.invalidateQueries({queryKey:["search-users"]}),await t.invalidateQueries({queryKey:["suggestion"]})])}});async function i(e){await n(e)}return{isPending:s,onFollow:i}}function q(){const{user:o}=w();if(!(o==null?void 0:o.id))throw new Error("user not found");const t=y(),{isPending:s,mutateAsync:n}=u({mutationKey:["follow"],mutationFn:async e=>(await l.delete(`/follows/${e.followedId}`)).data,onError:e=>{var r;if(c(e))return a.create({title:(r=e.response)==null?void 0:r.data.message,type:"error"});a.create({title:"Something went wrong!",type:"error"})},onSuccess:async()=>{Promise.all([await t.invalidateQueries({queryKey:["followers"]}),await t.invalidateQueries({queryKey:["following"]}),await t.invalidateQueries({queryKey:["check-auth"]}),await t.invalidateQueries({queryKey:["search-users"]}),await t.invalidateQueries({queryKey:["suggestion"]})])}});async function i(e){await n(e)}return{isPending:s,onUnFollow:i}}export{q as U,g as u};
