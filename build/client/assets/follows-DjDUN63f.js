import{w as re}from"./with-props-BMy_yGDR.js";import{a as m,o as n,v as ne}from"./chunk-IR6S3I6Y-DmKRdMYR.js";import{a as ae}from"./arrow-left-BD1zmGzF.js";import{a as se,b as _,A as D,u as $}from"./avatar-BJvGI2je.js";import{u as ie,U as q}from"./use-unfollow-BjTJYNLn.js";import{F as v}from"./flex-BUJ8Rvdc.js";import{T as h}from"./text-DPDxdRnU.js";import{q as le,v as I,w as R,x as ce,y as de,z as ue,A as ge,C as fe,D as pe,E as he,F as be,G as ve,H as N,I as T,J as me,K as Te,L as xe,N as we,O as ye,R as Ee,U as E,V as Ie,W as B,X as Re,Y as Ce,Z as O,_ as Fe,$ as Pe,a0 as je,a1 as Ve,a2 as Ae,B as L,l as k}from"./QueryClientProvider-Y79vg6s4.js";import{c as j,a as W,I as Se}from"./api-C3WgiByt.js";import{u as M}from"./authStore-BusQRGVs.js";import{B as x}from"./box-Dg76m1IB.js";import{u as Ne,a as Le,P as _e,s as H,R as Y}from"./render-strategy-a8E6jqFR.js";import"./query-CfEU5IWo.js";import"./create-recipe-context-GxxJYqGB.js";import"./index-BfRFUK5P.js";import"./js.cookie-Cz0CWeBA.js";var S,y=new Map,Be=e=>e.getBoundingClientRect();function Oe(e,o){const{scope:t="rect",getRect:r=Be,onChange:s}=o,c=ke({scope:t,getRect:r}),i=y.get(e);return i?(i.callbacks.push(s),s(r(e))):(y.set(e,{rect:{},callbacks:[s]}),y.size===1&&(S=requestAnimationFrame(c))),function(){const u=y.get(e);if(!u)return;const d=u.callbacks.indexOf(s);d>-1&&u.callbacks.splice(d,1),u.callbacks.length===0&&(y.delete(e),y.size===0&&cancelAnimationFrame(S))}}function ke(e){const{scope:o,getRect:t}=e,r=De(o);return function s(){const c=[];y.forEach((i,f)=>{const u=t(f);r(i.rect,u)||(i.rect=u,c.push(i))}),c.forEach(i=>{i.callbacks.forEach(f=>f(i.rect))}),S=requestAnimationFrame(s)}}var K=(e,o)=>e.width===o.width&&e.height===o.height,z=(e,o)=>e.top===o.top&&e.left===o.left,Ue=(e,o)=>K(e,o)&&z(e,o);function De(e){return e==="size"?K:e==="position"?z:Ue}function $e(e,o){const[t,r]=m.useState(e);return m.useEffect(()=>{const s=setTimeout(()=>{r(e)},o);return()=>{clearTimeout(s)}},[e,o]),t}const[X,V]=le({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),G=m.forwardRef((e,o)=>{const[t,r]=j()(e,["value"]),s=V(),c=Ne(),i=Le({...c,present:$e(s.value===e.value,0),immediate:!0}),f=I(s.getContentProps(t),i.getPresenceProps(),r);return n.jsx(_e,{value:i,children:i.unmounted?null:n.jsx(R.div,{...f,ref:ce(i.ref,o)})})});G.displayName="TabContent";const J=m.forwardRef((e,o)=>{const t=V(),r=I(t.getIndicatorProps(),e);return n.jsx(R.div,{...r,ref:o})});J.displayName="TabIndicator";const Q=m.forwardRef((e,o)=>{const t=V(),r=I(t.getListProps(),e);return n.jsx(R.div,{...r,ref:o})});Q.displayName="TabList";const Z=m.forwardRef((e,o)=>{const[t,r]=j()(e,["disabled","value"]),s=V(),c=I(s.getTriggerProps(t),r);return n.jsx(R.button,{...c,ref:o})});Z.displayName="TabTrigger";var qe=de("tabs").parts("root","list","trigger","content","indicator"),C=qe.build(),a=ue({getRootId:e=>{var o;return((o=e.ids)==null?void 0:o.root)??`tabs:${e.id}`},getListId:e=>{var o;return((o=e.ids)==null?void 0:o.list)??`tabs:${e.id}:list`},getContentId:(e,o)=>{var t;return((t=e.ids)==null?void 0:t.content)??`tabs:${e.id}:content-${o}`},getTriggerId:(e,o)=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`tabs:${e.id}:trigger-${o}`},getIndicatorId:e=>{var o;return((o=e.ids)==null?void 0:o.indicator)??`tabs:${e.id}:indicator`},getListEl:e=>a.getById(e,a.getListId(e)),getContentEl:(e,o)=>a.getById(e,a.getContentId(e,o)),getTriggerEl:(e,o)=>a.getById(e,a.getTriggerId(e,o)),getIndicatorEl:e=>a.getById(e,a.getIndicatorId(e)),getElements:e=>{const t=`[role=tab][data-ownedby='${CSS.escape(a.getListId(e))}']:not([disabled])`;return ge(a.getListEl(e),t)},getFirstTriggerEl:e=>fe(a.getElements(e)),getLastTriggerEl:e=>pe(a.getElements(e)),getNextTriggerEl:(e,o)=>he(a.getElements(e),a.getTriggerId(e,o),e.loopFocus),getPrevTriggerEl:(e,o)=>be(a.getElements(e),a.getTriggerId(e,o),e.loopFocus),getSelectedContentEl:e=>{if(e.value)return a.getContentEl(e,e.value)},getSelectedTriggerEl:e=>{if(e.value)return a.getTriggerEl(e,e.value)},getOffsetRect:e=>({left:(e==null?void 0:e.offsetLeft)??0,top:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0}),getRectById:(e,o)=>{const t=ve(a.getElements(e),a.getTriggerId(e,o));return a.resolveRect(a.getOffsetRect(t))},resolveRect:e=>({width:`${e.width}px`,height:`${e.height}px`,left:`${e.left}px`,top:`${e.top}px`})});function We(e,o,t){const r=e.context.translations,s=e.matches("focused"),c=e.context.orientation==="vertical",i=e.context.orientation==="horizontal",f=e.context.composite,u=e.context.indicatorState;function d(l){return{selected:e.context.value===l.value,focused:e.context.focusedValue===l.value,disabled:!!l.disabled}}return{value:e.context.value,focusedValue:e.context.focusedValue,setValue(l){o({type:"SET_VALUE",value:l})},clearValue(){o({type:"CLEAR_VALUE"})},setIndicatorRect(l){const g=a.getTriggerId(e.context,l);o({type:"SET_INDICATOR_RECT",id:g})},syncTabIndex(){o("SYNC_TAB_INDEX")},selectNext(l){o({type:"TAB_FOCUS",value:l,src:"selectNext"}),o({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(l){o({type:"TAB_FOCUS",value:l,src:"selectPrev"}),o({type:"ARROW_PREV",src:"selectPrev"})},focus(){var l;(l=a.getSelectedTriggerEl(e.context))==null||l.focus()},getRootProps(){return t.element({...C.root.attrs,id:a.getRootId(e.context),"data-orientation":e.context.orientation,"data-focus":T(s),dir:e.context.dir})},getListProps(){return t.element({...C.list.attrs,id:a.getListId(e.context),role:"tablist",dir:e.context.dir,"data-focus":T(s),"aria-orientation":e.context.orientation,"data-orientation":e.context.orientation,"aria-label":r==null?void 0:r.listLabel,onKeyDown(l){if(l.defaultPrevented||!me(l)||Te(l))return;const g={ArrowDown(){i||o({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){i||o({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){c||o({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){c||o({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){o("HOME")},End(){o("END")},Enter(){o({type:"ENTER"})}};let p=xe(l,e.context);const b=g[p];b&&(l.preventDefault(),b(l))}})},getTriggerState:d,getTriggerProps(l){const{value:g,disabled:p}=l,b=d(l);return t.button({...C.trigger.attrs,role:"tab",type:"button",disabled:p,dir:e.context.dir,"data-orientation":e.context.orientation,"data-disabled":T(p),"aria-disabled":p,"data-value":g,"aria-selected":b.selected,"data-selected":T(b.selected),"data-focus":T(b.focused),"aria-controls":b.selected?a.getContentId(e.context,g):void 0,"data-ownedby":a.getListId(e.context),"data-ssr":T(e.context.ssr),id:a.getTriggerId(e.context,g),tabIndex:b.selected&&f?0:-1,onFocus(){o({type:"TAB_FOCUS",value:g})},onBlur(P){const A=P.relatedTarget;(A==null?void 0:A.getAttribute("role"))!=="tab"&&o({type:"TAB_BLUR"})},onClick(P){P.defaultPrevented||p||(we()&&P.currentTarget.focus(),o({type:"TAB_CLICK",value:g}))}})},getContentProps(l){const{value:g}=l,p=e.context.value===g;return t.element({...C.content.attrs,dir:e.context.dir,id:a.getContentId(e.context,g),tabIndex:f?0:-1,"aria-labelledby":a.getTriggerId(e.context,g),role:"tabpanel","data-ownedby":a.getListId(e.context),"data-selected":T(p),"data-orientation":e.context.orientation,hidden:!p})},getIndicatorProps(){var l,g,p,b;return t.element({id:a.getIndicatorId(e.context),...C.indicator.attrs,dir:e.context.dir,"data-orientation":e.context.orientation,style:{"--transition-property":"left, right, top, bottom, width, height","--left":(l=u.rect)==null?void 0:l.left,"--top":(g=u.rect)==null?void 0:g.top,"--width":(p=u.rect)==null?void 0:p.width,"--height":(b=u.rect)==null?void 0:b.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:u.transition?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[i?"left":"top"]:i?"var(--left)":"var(--top)"}})}}}var{not:Me}=Fe;function He(e){const o=ye(e);return Ee({initial:"idle",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,loopFocus:!0,composite:!0,navigate(t){Ce(t.node)},...o,focusedValue:o.value??null,ssr:!0,indicatorState:{rendered:!1,transition:!1,rect:{left:"0px",top:"0px",width:"0px",height:"0px"}}},watch:{value:["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","navigateIfNeeded"],dir:["syncIndicatorRect"],orientation:["syncIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"},SET_INDICATOR_RECT:{actions:"setIndicatorRect"},SYNC_TAB_INDEX:{actions:"syncTabIndex"}},created:["syncFocusedValue"],entry:["checkRenderedElements","syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:"setFocusedValue"},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:"focusPrevTab"}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:"focusNextTab"}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:"focusFirstTab"}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:"focusLastTab"}],ENTER:{guard:Me("selectOnFocus"),actions:"selectFocusedTab"},TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{selectOnFocus:t=>t.activationMode==="automatic"},actions:{syncFocusedValue(t){t.value!=null&&t.focusedValue==null&&(t.focusedValue=t.value)},selectFocusedTab(t){E(()=>{const s=t.deselectable&&t.value===t.focusedValue?null:t.focusedValue;w.value(t,s)})},setFocusedValue(t,r){r.value!=null&&w.focusedValue(t,r.value)},clearFocusedValue(t){w.focusedValue(t,null)},setValue(t,r){const c=t.deselectable&&t.value===t.focusedValue?null:r.value;w.value(t,c)},clearValue(t){w.value(t,null)},focusFirstTab(t){E(()=>{var r;(r=a.getFirstTriggerEl(t))==null||r.focus()})},focusLastTab(t){E(()=>{var r;(r=a.getLastTriggerEl(t))==null||r.focus()})},focusNextTab(t){if(!t.focusedValue)return;const r=a.getNextTriggerEl(t,t.focusedValue);E(()=>{t.composite?r==null||r.focus():(r==null?void 0:r.dataset.value)!=null&&w.focusedValue(t,r.dataset.value)})},focusPrevTab(t){if(!t.focusedValue)return;const r=a.getPrevTriggerEl(t,t.focusedValue);E(()=>{t.composite?r==null||r.focus():(r==null?void 0:r.dataset.value)!=null&&w.focusedValue(t,r.dataset.value)})},checkRenderedElements(t){t.indicatorState.rendered=!!a.getIndicatorEl(t)},syncTabIndex(t){E(()=>{const r=a.getSelectedContentEl(t);if(!r)return;Ie(r).length>0?r.removeAttribute("tabindex"):r.setAttribute("tabindex","0")})},cleanupObserver(t){var r;(r=t.indicatorCleanup)==null||r.call(t)},allowIndicatorTransition(t){t.indicatorState.transition=!0},setIndicatorRect(t,r){const s=r.id??t.value;!t.indicatorState.rendered||!s||!a.getTriggerEl(t,s)||(t.indicatorState.rect=a.getRectById(t,s),B(()=>{t.indicatorState.transition=!1}))},syncSsr(t){t.ssr=!1},syncIndicatorRect(t){var c;(c=t.indicatorCleanup)==null||c.call(t);const r=t.value;if(!t.indicatorState.rendered||!r)return;const s=a.getSelectedTriggerEl(t);s&&(t.indicatorCleanup=Oe(s,{getRect(i){return a.getOffsetRect(i)},onChange(i){t.indicatorState.rect=a.resolveRect(i),B(()=>{t.indicatorState.transition=!1})}}))},navigateIfNeeded(t){const r=a.getSelectedTriggerEl(t);Re(r)&&t.navigate({value:t.value,node:r})}}})}var U={change:e=>{var o;e.value!=null&&((o=e.onValueChange)==null||o.call(e,{value:e.value}))},focusChange:e=>{var o;e.focusedValue!=null&&((o=e.onFocusChange)==null||o.call(e,{focusedValue:e.focusedValue}))}},w={value:(e,o)=>{O(o,e.value)||(e.value=o,U.change(e))},focusedValue:(e,o)=>{O(o,e.focusedValue)||(e.focusedValue=o,U.focusChange(e))}};N()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]);N()(["disabled","value"]);N()(["value"]);const Ye=(e={})=>{const{getRootNode:o}=Pe(),{dir:t}=se(),r={id:m.useId(),dir:t,getRootNode:o,value:e.defaultValue,...e},s={...r,value:e.value,onValueChange:_(e.onValueChange,{sync:!0}),onFocusChange:_(e.onFocusChange)},[c,i]=je(He(r),{context:s});return We(c,i,Ve)},ee=m.forwardRef((e,o)=>{const[t,r]=H(e),[s,c]=j()(r,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),i=Ye(s),f=I(i.getRootProps(),c);return n.jsx(X,{value:i,children:n.jsx(Y,{value:t,children:n.jsx(R.div,{...f,ref:o})})})});ee.displayName="TabsRoot";const te=m.forwardRef((e,o)=>{const[t,r]=H(e),[{value:s},c]=j()(r,["value"]),i=I(s.getRootProps(),c);return n.jsx(X,{value:s,children:n.jsx(Y,{value:t,children:n.jsx(R.div,{...i,ref:o})})})});te.displayName="TabsRootProvider";const{withProvider:oe,withContext:F,useStyles:mt,PropsProvider:Tt}=Ae({key:"tabs"});oe(te,"root",{forwardAsChild:!0});const Ke=oe(ee,"root",{forwardAsChild:!0}),ze=F(Z,"trigger",{forwardAsChild:!0}),Xe=F(G,"content",{forwardAsChild:!0});F("div","contentGroup");const Ge=F(Q,"list",{forwardAsChild:!0});F(J,"indicator",{forwardAsChild:!0});function Je({follower:e,...o}){const{isPending:t,onFollow:r}=ie(),{isPending:s,onUnFollow:c}=q();return console.log("followedID",e.id),n.jsx(v,{...o,children:n.jsxs(v,{w:"full",p:"20px",display:"flex",gap:"16px",borderBottom:"3px solid",borderColor:"bdr",children:[n.jsx(D,{name:e.profile.fullName||"",src:e.profile.avatarUrl||"",shape:"full",size:"full",width:"50px",height:"50px"}),n.jsxs(v,{display:"flex",flexDirection:"column",gap:"4px",flex:"10",children:[n.jsx(h,{fontWeight:"bold",color:"white",children:e.profile.fullName}),n.jsxs(h,{color:"text.light",children:["@",e.username]}),n.jsx(h,{children:e.profile.bio||""})]}),n.jsx(L,{variant:"outline",alignSelf:"end",bg:"none",color:"white",borderWidth:"1px",borderColor:"white",rounded:"full",alignItems:"center",flex:"3",disabled:t||s,onClick:()=>e.isFollowing?c({followedId:e.id}):r({followedId:e.id}),children:n.jsx(h,{textStyle:"xs",color:"white",children:e.isFollowing?"Unfollow":"Follow Back"})})]})})}function Qe(){const{user:e}=M(),o=e==null?void 0:e.id;if(!o)throw new Error("user not found");const{data:t,isLoading:r,error:s}=$({queryKey:["followers"],queryFn:async()=>(await W.get(`/follows/followers/${o}`)).data.data,enabled:!!o});return{data:t,isLoading:r,error:s}}function Ze(){const{user:e}=M(),o=e==null?void 0:e.id;if(!o)throw new Error("user not found");const{data:t,isLoading:r,error:s}=$({queryKey:["following"],queryFn:async()=>(await W.get(`/follows/following/${o}`)).data.data,enabled:!!o});return{data:t,isLoading:r,error:s}}function et({following:e,...o}){const{isPending:t,onUnFollow:r}=q();return n.jsx(v,{...o,children:n.jsxs(v,{w:"full",p:"20px",display:"flex",gap:"16px",borderBottom:"3px solid",borderColor:"bdr",children:[n.jsx(D,{name:e.profile.fullName||"",src:e.profile.avatarUrl||"",shape:"full",size:"full",width:"50px",height:"50px"}),n.jsxs(v,{display:"flex",flexDirection:"column",gap:"4px",flex:"10",children:[n.jsx(h,{fontWeight:"bold",color:"white",children:e.profile.fullName}),n.jsxs(h,{color:"text.light",children:["@",e.username]})]}),n.jsx(L,{variant:"outline",alignSelf:"end",bg:"none",color:"white",borderWidth:"1px",borderColor:"white",rounded:"full",alignItems:"center",flex:"3",disabled:t,onClick:()=>r({followedId:e.id}),children:n.jsx(h,{textStyle:"xs",children:"Unfollow"})})]})})}const tt=()=>{const{data:e,isLoading:o,error:t}=Qe(),{data:r,isLoading:s,error:c}=Ze(),i=e,f=r,u=[{title:"Followers",content:n.jsx(n.Fragment,{children:o?n.jsx(x,{display:"flex",justifyContent:"center",paddingY:50,children:n.jsx(k,{})}):t?n.jsx(x,{paddingY:50,children:n.jsx(h,{color:"red.500",children:"Error loading followers."})}):i&&i.length>0?i.map(d=>n.jsx(Je,{follower:d,w:"full"},d.id)):n.jsx(x,{paddingY:50,children:n.jsx(h,{color:"gray.500",textAlign:"center",children:"No followers yet."})})})},{title:"Followings",content:n.jsx(n.Fragment,{children:s?n.jsx(x,{display:"flex",justifyContent:"center",paddingY:50,children:n.jsx(k,{})}):c?n.jsx(x,{paddingY:50,children:n.jsx(h,{color:"red.500",children:"Error loading followers."})}):f&&f.length>0?f.map(d=>n.jsx(et,{following:d,w:"full"},d.id)):n.jsx(x,{paddingY:50,children:n.jsx(h,{color:"gray.500",textAlign:"center",children:"No followers yet."})})})}];return n.jsx(v,{minH:"dvh",px:"5",children:n.jsxs(Ke,{defaultValue:"Followers",width:"full",colorPalette:"green",children:[n.jsx(Ge,{children:u.map((d,l)=>n.jsx(ze,{value:d.title,color:"white",flexBasis:"50%",justifyContent:"center",children:d.title},l))}),n.jsx(x,{pos:"relative",minH:"200px",width:"full",children:u.map((d,l)=>n.jsx(Xe,{value:d.title,position:"absolute",inset:"0",color:"white",_open:{animationName:"fade-in, scale-in",animationDuration:"300ms"},_closed:{animationName:"fade-out, scale-out",animationDuration:"120ms"},children:d.content},l))})]})})},xt=re(function(){const o=ne();function t(){o("/")}return n.jsxs(v,{p:"16px 0",flexDir:"column",children:[n.jsxs(v,{alignItems:"center",mb:"2",children:[n.jsx(L,{variant:"ghost",display:"flex",gap:"4px",_hover:{bg:"initial"},color:"secondary",onClick:t,children:n.jsx(Se,{src:ae,width:"27px"})}),n.jsx(h,{color:"white",children:"Follow"})]}),n.jsx(tt,{})]})});export{xt as default};
