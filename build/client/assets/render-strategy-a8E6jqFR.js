import{R as P,a7 as p,H as v,a0 as E,q as y}from"./QueryClientProvider-Y79vg6s4.js";import{a as A}from"./chunk-IR6S3I6Y-DmKRdMYR.js";import{b as f}from"./avatar-BJvGI2je.js";import{c as O}from"./api-C3WgiByt.js";function U(a,e,o){const t=a.matches("mounted","unmountSuspended");return{skip:!a.context.initial&&t,present:t,setNode(n){n&&e({type:"NODE.SET",node:n})},unmount(){e({type:"UNMOUNT"})}}}function g(a){return P({initial:a.present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,...a},exit:["clearInitial","cleanupNode"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],after:{ANIMATION_DURATION:{target:"unmounted",actions:["invokeOnExitComplete"]}},on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{delays:{ANIMATION_DURATION(e){var o,t;return N((o=e.styles)==null?void 0:o.animationDuration)+N((t=e.styles)==null?void 0:t.animationDelay)+M}},actions:{setInitial(e){e.initial=!0},clearInitial(e){e.initial=!1},cleanupNode(e){e.node=null,e.styles=null},invokeOnExitComplete(e){var o;(o=e.onExitComplete)==null||o.call(e)},setNode(e,o){e.node=p(o.node)},setStyles(e,o){const t=o.node.ownerDocument.defaultView||window;e.styles=p(t.getComputedStyle(o.node))},syncPresence(e,o,{send:t}){var r;if(e.present){t({type:"MOUNT",src:"presence.changed"});return}if(!e.present&&((r=e.node)==null?void 0:r.ownerDocument.visibilityState)==="hidden"){t({type:"UNMOUNT",src:"visibilitychange"});return}const n=l(e.styles);(e.immediate?queueMicrotask:requestAnimationFrame)(()=>{var i,u;e.unmountAnimationName=n,n==="none"||n===e.prevAnimationName||((i=e.styles)==null?void 0:i.display)==="none"||((u=e.styles)==null?void 0:u.animationDuration)==="0s"?t({type:"UNMOUNT",src:"presence.changed"}):t({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName(e){(e.immediate?queueMicrotask:requestAnimationFrame)(()=>{e.prevAnimationName=l(e.styles)})},clearPrevAnimationName(e){e.prevAnimationName=null}},activities:{trackAnimationEvents(e,o,{send:t}){const n=e.node;if(!n)return;const m=i=>{var s,c;(((c=(s=i.composedPath)==null?void 0:s.call(i))==null?void 0:c[0])??i.target)===n&&(e.prevAnimationName=l(e.styles))},r=i=>{var c,d;const u=l(e.styles);(((d=(c=i.composedPath)==null?void 0:c.call(i))==null?void 0:d[0])??i.target)===n&&u===e.unmountAnimationName&&t({type:"UNMOUNT",src:"animationend"})};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}}})}function l(a){return(a==null?void 0:a.animationName)||"none"}function N(a){return parseFloat(a||"0")*1e3}var M=16.667;v()(["onExitComplete","present","immediate"]);const I=a=>{const{lazyMount:e,unmountOnExit:o,present:t,...n}=a,m=A.useRef(!1),r={...n,present:t,onExitComplete:f(a.onExitComplete)},[i,u]=E(g(r),{context:r}),s=U(i,u);s.present&&(m.current=!0);const c=!s.present&&!m.current&&e||o&&!s.present&&m.current,d=()=>({"data-state":t?"open":"closed",hidden:!s.present});return{ref:s.setNode,getPresenceProps:d,present:s.present,unmounted:c}},[R,k]=y({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),[D,w]=y({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),_=a=>O()(a,["lazyMount","unmountOnExit"]);export{R as P,D as R,I as a,k as b,_ as s,w as u};
