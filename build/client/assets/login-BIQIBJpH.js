import{w as I}from"./with-props-BMy_yGDR.js";import{v,o as e,y as C,z as h}from"./chunk-IR6S3I6Y-DmKRdMYR.js";import{c as L}from"./logo-BU9o5v3B.js";import{f}from"./theme-CI7rxUqC.js";import{u as k,s as E,F as j,b as w,c as b,a as y}from"./zod-CxjU56v7.js";import{l as P,C as R}from"./auth.schemas-CADUVsOR.js";import{t as x,am as B,B as F,l as W}from"./QueryClientProvider-Y79vg6s4.js";import{u as q}from"./authStore-BusQRGVs.js";import{u as z,a as A,i as N,I as T}from"./api-C3WgiByt.js";import{a as H}from"./js.cookie-Cz0CWeBA.js";import{B as r}from"./box-Dg76m1IB.js";import{I as S}from"./input-coGY6x29.js";import{T as g}from"./text-DPDxdRnU.js";import{H as U}from"./h-stack-CzZcGfDb.js";import"./create-recipe-context-GxxJYqGB.js";import"./field.anatomy-BYGrjU18.js";import"./index-BfRFUK5P.js";function K(){const{register:o,handleSubmit:m,formState:{errors:i},reset:p}=k({mode:"onChange",resolver:E(P)}),{setUser:n}=q(),a=v(),{isPending:l,mutateAsync:d}=z({mutationKey:["login"],mutationFn:async s=>{let t;s.loginId.includes("@")?t={email:s.loginId,password:s.password}:t={username:s.loginId,password:s.password};const u=await A.post("/auth/login",t);return n(u.data.data.user),H.set("token",u.data.data.token,{expires:1}),u.data},onError:s=>{var t;if(console.log(s),N(s))return x.create({title:s.message,description:(t=s.response)==null?void 0:t.data.message,type:"error",duration:5e3});x.create({title:"Something went wrong!",type:"error"})},onSuccess:async s=>{x.create({title:s.message,type:"success"}),a({pathname:"/"})}});async function c(s){await d(s),p()}return{register:o,handleSubmit:m,errors:i,isPending:l,onLogin:c}}function M(){var a,l,d,c;const{errors:o,handleSubmit:m,isPending:i,onLogin:p,register:n}=K();return e.jsxs(r,{children:[e.jsxs(r,{my:"20px",children:[e.jsx(T,{src:L,mb:"20px"}),e.jsx(r,{fontSize:{base:"28px"},fontWeight:"700",color:"#FFFFFF",children:"Login to Circle"})]}),e.jsxs(C,{onSubmit:m(p),children:[e.jsxs(B,{w:"full",gap:"4",children:[e.jsx(j,{invalid:!!((a=o.loginId)!=null&&a.message),required:!0,children:e.jsxs(r,{pos:"relative",w:"full",children:[e.jsx(S,{className:"peer",placeholder:"",rounded:"lg",borderWidth:"2px",borderColor:"#545454",color:"white",...n("loginId")}),e.jsxs(w,{css:f,color:"text.light",children:["Email/Username ",e.jsx(b,{})]}),e.jsx(y,{children:(l=o.loginId)==null?void 0:l.message})]})}),e.jsx(j,{invalid:!!((d=o.password)!=null&&d.message),required:!0,children:e.jsxs(r,{pos:"relative",w:"full",children:[e.jsx(S,{className:"peer",placeholder:"",borderRadius:"8",type:"password",rounded:"lg",borderWidth:"2px",borderColor:"#545454",color:"white",...n("password")}),e.jsxs(w,{css:f,color:"text.light",children:["Password ",e.jsx(b,{})]}),e.jsx(y,{children:(c=o.password)==null?void 0:c.message})]})}),e.jsx(r,{w:"full",display:"flex",justifyContent:"flex-end",children:e.jsx(F,{asChild:!0,variant:"plain",children:e.jsx(h,{to:"/forgot-password",children:e.jsx(g,{color:"text.light",children:"Forgot Password?"})})})})]}),e.jsx(r,{justifyContent:"flex-end",w:"full",children:e.jsx(F,{variant:"solid",w:"full",role:"submit",rounded:"4xl",bg:"brand.solid",type:"submit",disabled:!!i,children:i?e.jsx(W,{}):"Login"})})]}),e.jsxs(U,{fontSize:{base:"14px"},direction:"row",w:"full",mt:"12px",children:[e.jsx(g,{color:"text.light",children:"don't have an account yet? "}),e.jsx(h,{to:"/register",children:e.jsx(g,{color:"brand.solid",children:"Create account"})})]})]})}const ne=I(function(){return e.jsx(R,{maxW:"md",mt:"128px",children:e.jsx(M,{})})});export{ne as default};
