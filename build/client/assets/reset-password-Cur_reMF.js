import{w as P}from"./with-props-BMy_yGDR.js";import{A as F,v as y,o as s,y as S}from"./chunk-IR6S3I6Y-DmKRdMYR.js";import{c as R}from"./logo-BU9o5v3B.js";import{f as x}from"./theme-CI7rxUqC.js";import{t as p,am as v,B as C,l as N}from"./QueryClientProvider-Y79vg6s4.js";import{u as B,a as I,i as A,I as E}from"./api-C3WgiByt.js";import{a as W,C as k}from"./auth.schemas-CADUVsOR.js";import{u as q,s as z,F as f,b as w,c as h,a as g}from"./zod-CxjU56v7.js";import{B as o}from"./box-Dg76m1IB.js";import{I as j}from"./input-coGY6x29.js";import"./create-recipe-context-GxxJYqGB.js";import"./field.anatomy-BYGrjU18.js";import"./index-BfRFUK5P.js";import"./js.cookie-Cz0CWeBA.js";function L(){const{register:r,handleSubmit:c,formState:{errors:u},reset:t}=q({mode:"all",resolver:z(W)}),[a]=F(),i=y(),n=a.get("token"),{isPending:d,mutateAsync:l}=B({mutationKey:["reset-password"],mutationFn:async({newPassword:e,confirmPassword:m})=>(await I.post("/auth/reset-password",{newPassword:e,confirmPassword:m},{headers:{Authorization:`Bearer ${n}`}})).data,onError:e=>{var m;if(console.log(e),A(e))return p.create({title:e.message,description:(m=e.response)==null?void 0:m.data.message,type:"error",duration:5e3});p.create({title:"Something went wrong!",type:"error"})},onSuccess:async e=>{p.create({title:e.message,type:"success"}),i({pathname:"/login"})}});async function b(e){await l(e),t()}return{register:r,onSubmit:b,isPending:d,handleSubmit:c,errors:u}}function K(){var i,n,d,l;const{errors:r,handleSubmit:c,onSubmit:u,isPending:t,register:a}=L();return s.jsxs(k,{maxW:"md",mt:"128px",children:[s.jsxs(o,{my:"20px",children:[s.jsx(E,{src:R,mb:"20px"}),s.jsx(o,{fontSize:{base:"28px"},fontWeight:"700",color:"#FFFFFF",children:"Reset Password"})]}),s.jsxs(S,{onSubmit:c(u),children:[s.jsxs(v,{w:"full",gap:"4",children:[s.jsx(f,{invalid:!!((i=r.newPassword)!=null&&i.message),required:!0,children:s.jsxs(o,{pos:"relative",w:"full",children:[s.jsx(j,{className:"peer",placeholder:"",borderRadius:"8",type:"password",rounded:"lg",borderWidth:"2px",borderColor:"#545454",...a("newPassword")}),s.jsxs(w,{css:x,children:["New Password ",s.jsx(h,{})]}),s.jsx(g,{children:(n=r.confirmPassword)==null?void 0:n.message})]})}),s.jsx(f,{invalid:!!((d=r.confirmPassword)!=null&&d.message),required:!0,children:s.jsxs(o,{pos:"relative",w:"full",children:[s.jsx(j,{className:"peer",placeholder:"",borderRadius:"8",type:"password",rounded:"lg",borderWidth:"2px",borderColor:"#545454",...a("confirmPassword")}),s.jsxs(w,{css:x,children:["Confirm New Password ",s.jsx(h,{})]}),s.jsx(g,{children:(l=r.confirmPassword)==null?void 0:l.message})]})})]}),s.jsx(o,{justifyContent:"flex-end",w:"full",mt:"12px",children:s.jsx(C,{variant:"solid",w:"full",role:"submit",borderRadius:"full",bg:"brand.solid",type:"submit",disabled:!!t,children:t?s.jsx(N,{}):"Create New Password"})})]})]})}const ss=P(function(){return s.jsx(K,{})});export{ss as default};
