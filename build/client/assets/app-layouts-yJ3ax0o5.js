import{w as W}from"./with-props-BMy_yGDR.js";import{a as F,o as e,t as O,N as T,O as X,v as G,w as Y}from"./chunk-IR6S3I6Y-DmKRdMYR.js";import{c as $}from"./logo-BU9o5v3B.js";import{s as Q}from"./user-search-outline-D94IWncY.js";import{A as Z,u as z}from"./avatar-BJvGI2je.js";import{u as k}from"./authStore-BusQRGVs.js";import{a as B}from"./js.cookie-Cz0CWeBA.js";import{u as _,a as N,i as V,I as j}from"./api-C3WgiByt.js";import{c as J,D as e2,a as t2,b as o2,d as s2,e as i2,f as l2,C as r2,g as n2,T as a2,h as c2}from"./thread.schema-DDD88C0L.js";import{k as d2,B as S,u as h2,t as P,P as g2,l as q}from"./QueryClientProvider-Y79vg6s4.js";import{u as x2,s as C2,F as p2,a as m2}from"./zod-CxjU56v7.js";import{B as x}from"./box-Dg76m1IB.js";import{I as f2}from"./input-coGY6x29.js";import{T as a}from"./text-DPDxdRnU.js";import{U as u2}from"./profile-update-BuMHxzVH.js";import{u as w2,U as j2}from"./use-unfollow-BjTJYNLn.js";import{F as c}from"./flex-BUJ8Rvdc.js";import{a as K,b as v2,c as y2}from"./create-recipe-context-GxxJYqGB.js";import{F as b2}from"./float-Dj78ZGsy.js";import"./query-CfEU5IWo.js";import"./icon-button-c1iJnyvC.js";import"./render-strategy-a8E6jqFR.js";import"./field.anatomy-BYGrjU18.js";import"./index-BfRFUK5P.js";import"./theme-CI7rxUqC.js";const D=F.forwardRef(function(o,l){const{templateAreas:s,column:i,row:r,autoFlow:d,autoRows:g,templateRows:h,autoColumns:C,templateColumns:f,inline:u,...v}=o;return e.jsx(K.div,{...v,ref:l,css:[{display:u?"inline-grid":"grid",gridTemplateAreas:s,gridAutoColumns:C,gridColumn:i,gridRow:r,gridAutoFlow:d,gridAutoRows:g,gridTemplateRows:h,gridTemplateColumns:f},o.css]})});function E(t){return d2(t,o=>o==="auto"?"auto":`span ${o}/span ${o}`)}const p=F.forwardRef(function(o,l){const{area:s,colSpan:i,colStart:r,colEnd:d,rowEnd:g,rowSpan:h,rowStart:C,...f}=o,u=v2({gridArea:s,gridColumn:E(i),gridRow:E(h),gridColumnStart:r,gridColumnEnd:d,gridRowStart:C,gridRowEnd:g});return e.jsx(K.div,{ref:l,css:u,...f})}),{withContext:S2,PropsProvider:C0}=y2({key:"link"}),L2=S2("a"),F2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M27.8135%2011.16L18.5735%203.7733C17.1469%202.62663%2014.8402%202.62663%2013.4269%203.75996L4.18686%2011.16C3.14686%2011.9866%202.48019%2013.7333%202.70686%2015.04L4.48019%2025.6533C4.80019%2027.5466%206.61352%2029.08%208.53352%2029.08H23.4669C25.3735%2029.08%2027.2002%2027.5333%2027.5202%2025.6533L29.2935%2015.04C29.5069%2013.7333%2028.8402%2011.9866%2027.8135%2011.16ZM16.0002%2020.6666C14.1602%2020.6666%2012.6669%2019.1733%2012.6669%2017.3333C12.6669%2015.4933%2014.1602%2014%2016.0002%2014C17.8402%2014%2019.3335%2015.4933%2019.3335%2017.3333C19.3335%2019.1733%2017.8402%2020.6666%2016.0002%2020.6666Z'%20fill='white'/%3e%3c/svg%3e",k2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.4665%2030.0801H8.53313C6.10646%2030.0801%203.89313%2028.2134%203.49313%2025.8134L1.71979%2015.2001C1.43979%2013.5468%202.2398%2011.4268%203.5598%2010.3734L12.7998%202.97337C14.5865%201.53337%2017.3998%201.54672%2019.1998%202.98672L28.4398%2010.3734C29.7465%2011.4268%2030.5465%2013.5468%2030.2798%2015.2001L28.5065%2025.8134C28.1065%2028.1734%2025.8531%2030.0801%2023.4665%2030.0801ZM15.9865%203.92007C15.2798%203.92007%2014.5731%204.13336%2014.0531%204.5467L4.81314%2011.9468C4.05314%2012.5601%203.53314%2013.92%203.69314%2014.88L5.46648%2025.4934C5.70648%2026.8934%207.10646%2028.0801%208.53313%2028.0801H23.4665C24.8931%2028.0801%2026.2931%2026.8934%2026.5331%2025.48L28.3065%2014.8668C28.4665%2013.9068%2027.9331%2012.5334%2027.1865%2011.9334L17.9465%204.5467C17.4131%204.13336%2016.7065%203.92007%2015.9865%203.92007Z'%20fill='white'/%3e%3cpath%20d='M16%2021.6667C13.6133%2021.6667%2011.6666%2019.72%2011.6666%2017.3333C11.6666%2014.9467%2013.6133%2013%2016%2013C18.3866%2013%2020.3333%2014.9467%2020.3333%2017.3333C20.3333%2019.72%2018.3866%2021.6667%2016%2021.6667ZM16%2015C14.72%2015%2013.6666%2016.0533%2013.6666%2017.3333C13.6666%2018.6133%2014.72%2019.6667%2016%2019.6667C17.28%2019.6667%2018.3333%2018.6133%2018.3333%2017.3333C18.3333%2016.0533%2017.28%2015%2016%2015Z'%20fill='white'/%3e%3c/svg%3e",M2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%2018.6666C9.32%2018.6666%203.88%2023.1466%203.88%2028.6666C3.88%2029.04%204.17334%2029.3333%204.54667%2029.3333H27.4533C27.8267%2029.3333%2028.12%2029.04%2028.12%2028.6666C28.12%2023.1466%2022.68%2018.6666%2016%2018.6666Z'%20fill='white'/%3e%3cpath%20d='M22.2934%2013.8L21.0134%2012.52C21.68%2011.52%2022.0667%2010.32%2022.0667%209.02663C22.0667%205.50663%2019.2134%202.66663%2015.7067%202.66663C12.2%202.66663%209.33337%205.51996%209.33337%209.02663C9.33337%2012.5333%2012.1867%2015.3866%2015.6934%2015.3866C16.9867%2015.3866%2018.1867%2015%2019.1867%2014.3333L20.4667%2015.6133C20.72%2015.8666%2021.0534%2015.9866%2021.3734%2015.9866C21.7067%2015.9866%2022.04%2015.8666%2022.28%2015.6133C22.7867%2015.12%2022.7867%2014.3066%2022.2934%2013.8Z'%20fill='white'/%3e%3c/svg%3e",R2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.92%204.1333C19.5066%204.1333%2017.3466%205.30663%2016%207.10663C14.6533%205.30663%2012.4933%204.1333%2010.08%204.1333C5.98663%204.1333%202.66663%207.46663%202.66663%2011.5866C2.66663%2013.1733%202.91996%2014.64%203.35996%2016C5.46663%2022.6666%2011.96%2026.6533%2015.1733%2027.7466C15.6266%2027.9066%2016.3733%2027.9066%2016.8266%2027.7466C20.04%2026.6533%2026.5333%2022.6666%2028.64%2016C29.08%2014.64%2029.3333%2013.1733%2029.3333%2011.5866C29.3333%207.46663%2026.0133%204.1333%2021.92%204.1333Z'%20fill='white'/%3e%3c/svg%3e",U2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%2028.8666C15.5866%2028.8666%2015.1866%2028.8133%2014.8533%2028.6933C9.75996%2026.9466%201.66663%2020.7466%201.66663%2011.5866C1.66663%206.91997%205.43996%203.1333%2010.08%203.1333C12.3333%203.1333%2014.44%204.0133%2016%205.58663C17.56%204.0133%2019.6666%203.1333%2021.92%203.1333C26.56%203.1333%2030.3333%206.9333%2030.3333%2011.5866C30.3333%2020.76%2022.24%2026.9466%2017.1466%2028.6933C16.8133%2028.8133%2016.4133%2028.8666%2016%2028.8666ZM10.08%205.1333C6.54663%205.1333%203.66663%208.02663%203.66663%2011.5866C3.66663%2020.6933%2012.4266%2025.76%2015.5066%2026.8133C15.7466%2026.8933%2016.2666%2026.8933%2016.5066%2026.8133C19.5733%2025.76%2028.3466%2020.7066%2028.3466%2011.5866C28.3466%208.02663%2025.4666%205.1333%2021.9333%205.1333C19.9066%205.1333%2018.0266%206.07997%2016.8133%207.71997C16.44%208.22663%2015.5866%208.22663%2015.2133%207.71997C13.9733%206.06663%2012.1066%205.1333%2010.08%205.1333Z'%20fill='white'/%3e%3c/svg%3e",I2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M29.3334%2016C29.3334%208.65333%2023.3467%202.66666%2016.0001%202.66666C8.65341%202.66666%202.66675%208.65333%202.66675%2016C2.66675%2019.8667%204.33341%2023.3467%206.97341%2025.7867C6.97341%2025.8%206.97341%2025.8%206.96008%2025.8133C7.09341%2025.9467%207.25341%2026.0533%207.38675%2026.1733C7.46675%2026.24%207.53341%2026.3067%207.61341%2026.36C7.85342%2026.56%208.12008%2026.7467%208.37341%2026.9333C8.46675%2027%208.54675%2027.0533%208.64008%2027.12C8.89341%2027.2933%209.16008%2027.4533%209.44008%2027.6C9.53341%2027.6533%209.64008%2027.72%209.73342%2027.7733C10.0001%2027.92%2010.2801%2028.0533%2010.5734%2028.1733C10.6801%2028.2267%2010.7867%2028.28%2010.8934%2028.32C11.1867%2028.44%2011.4801%2028.5467%2011.7734%2028.64C11.8801%2028.68%2011.9867%2028.72%2012.0934%2028.7467C12.4134%2028.84%2012.7334%2028.92%2013.0534%2029C13.1467%2029.0267%2013.2401%2029.0533%2013.3467%2029.0667C13.7201%2029.1467%2014.0934%2029.2%2014.4801%2029.24C14.5334%2029.24%2014.5867%2029.2533%2014.6401%2029.2667C15.0934%2029.3067%2015.5467%2029.3333%2016.0001%2029.3333C16.4534%2029.3333%2016.9067%2029.3067%2017.3467%2029.2667C17.4001%2029.2667%2017.4534%2029.2533%2017.5067%2029.24C17.8934%2029.2%2018.2667%2029.1467%2018.6401%2029.0667C18.7334%2029.0533%2018.8267%2029.0133%2018.9334%2029C19.2534%2028.92%2019.5867%2028.8533%2019.8934%2028.7467C20.0001%2028.7067%2020.1067%2028.6667%2020.2134%2028.64C20.5067%2028.5333%2020.8134%2028.44%2021.0934%2028.32C21.2001%2028.28%2021.3067%2028.2267%2021.4134%2028.1733C21.6934%2028.0533%2021.9734%2027.92%2022.2534%2027.7733C22.3601%2027.72%2022.4534%2027.6533%2022.5467%2027.6C22.8134%2027.44%2023.0801%2027.2933%2023.3467%2027.12C23.4401%2027.0667%2023.5201%2027%2023.6134%2026.9333C23.8801%2026.7467%2024.1334%2026.56%2024.3734%2026.36C24.4534%2026.2933%2024.5201%2026.2267%2024.6001%2026.1733C24.7467%2026.0533%2024.8934%2025.9333%2025.0267%2025.8133C25.0267%2025.8%2025.0267%2025.8%2025.0134%2025.7867C27.6667%2023.3467%2029.3334%2019.8667%2029.3334%2016ZM22.5868%2022.6267C18.9734%2020.2%2013.0534%2020.2%209.41341%2022.6267C8.82675%2023.0133%208.34675%2023.4667%207.94675%2023.96C5.92008%2021.9067%204.66675%2019.0933%204.66675%2016C4.66675%209.74666%209.74675%204.66666%2016.0001%204.66666C22.2534%204.66666%2027.3334%209.74666%2027.3334%2016C27.3334%2019.0933%2026.0801%2021.9067%2024.0534%2023.96C23.6667%2023.4667%2023.1734%2023.0133%2022.5868%2022.6267Z'%20fill='white'/%3e%3cpath%20d='M16%209.24C13.24%209.24%2011%2011.48%2011%2014.24C11%2016.9467%2013.12%2019.1467%2015.9333%2019.2267C15.9733%2019.2267%2016.0267%2019.2267%2016.0533%2019.2267C16.08%2019.2267%2016.12%2019.2267%2016.1467%2019.2267C16.16%2019.2267%2016.1733%2019.2267%2016.1733%2019.2267C18.8667%2019.1333%2020.9867%2016.9467%2021%2014.24C21%2011.48%2018.76%209.24%2016%209.24Z'%20fill='white'/%3e%3c/svg%3e",P2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.16%2018.04C16.1333%2018.04%2016.0933%2018.04%2016.0667%2018.04C16.0267%2018.04%2015.9733%2018.04%2015.9333%2018.04C12.9067%2017.9466%2010.64%2015.5866%2010.64%2012.68C10.64%209.71997%2013.0533%207.30664%2016.0133%207.30664C18.9733%207.30664%2021.3867%209.71997%2021.3867%2012.68C21.3734%2015.6%2019.0933%2017.9466%2016.2%2018.04C16.1733%2018.04%2016.1733%2018.04%2016.16%2018.04ZM16%209.29331C14.1333%209.29331%2012.6267%2010.8133%2012.6267%2012.6666C12.6267%2014.4933%2014.0533%2015.9733%2015.8667%2016.04C15.9067%2016.0266%2016.04%2016.0266%2016.1733%2016.04C17.96%2015.9466%2019.36%2014.48%2019.3733%2012.6666C19.3733%2010.8133%2017.8667%209.29331%2016%209.29331Z'%20fill='white'/%3e%3cpath%20d='M15.9999%2030.3334C12.4133%2030.3334%208.98661%2029.0001%206.33328%2026.5734C6.09328%2026.3601%205.98661%2026.04%206.01328%2025.7334C6.18661%2024.1467%207.17328%2022.6667%208.81328%2021.5734C12.7866%2018.9334%2019.2266%2018.9334%2023.1866%2021.5734C24.8266%2022.6801%2025.8133%2024.1467%2025.9866%2025.7334C26.0266%2026.0534%2025.9066%2026.3601%2025.6666%2026.5734C23.0133%2029.0001%2019.5866%2030.3334%2015.9999%2030.3334ZM8.10661%2025.4667C10.3199%2027.3201%2013.1066%2028.3334%2015.9999%2028.3334C18.8933%2028.3334%2021.6799%2027.3201%2023.8933%2025.4667C23.6533%2024.6534%2023.0133%2023.8667%2022.0666%2023.2267C18.7866%2021.0401%2013.2266%2021.0401%209.91994%2023.2267C8.97328%2023.8667%208.34661%2024.6534%208.10661%2025.4667Z'%20fill='white'/%3e%3cpath%20d='M16%2030.3333C8.09329%2030.3333%201.66663%2023.9066%201.66663%2016C1.66663%208.09329%208.09329%201.66663%2016%201.66663C23.9066%201.66663%2030.3333%208.09329%2030.3333%2016C30.3333%2023.9066%2023.9066%2030.3333%2016%2030.3333ZM16%203.66663C9.19996%203.66663%203.66663%209.19996%203.66663%2016C3.66663%2022.8%209.19996%2028.3333%2016%2028.3333C22.8%2028.3333%2028.3333%2022.8%2028.3333%2016C28.3333%209.19996%2022.8%203.66663%2016%203.66663Z'%20fill='white'/%3e%3c/svg%3e",B2="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.8667%2010.08C12.28%205.28001%2014.7467%203.32001%2020.1467%203.32001H20.32C26.28%203.32001%2028.6667%205.70667%2028.6667%2011.6667V20.36C28.6667%2026.32%2026.28%2028.7067%2020.32%2028.7067H20.1467C14.7867%2028.7067%2012.32%2026.7733%2011.88%2022.0533'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M20%2016H4.82666'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7.80016%2011.5333L3.3335%2016L7.80016%2020.4667'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Z2=[{label:"Home",logo:{fill:F2,outline:k2},path:"/"},{label:"Search",logo:{fill:M2,outline:Q},path:"/search"},{label:"Follows",logo:{fill:R2,outline:U2},path:"/follows"},{label:"Profile",logo:{fill:I2,outline:P2},path:"/profile"}];function N2({children:t,...o}){return e.jsx(S,{rounded:"full",...o,color:"#FFF",bg:"brand.solid",children:t})}function D2(){var A,H;const{user:t}=k(),o=(A=t==null?void 0:t.profile)==null?void 0:A.fullName,l=(H=t==null?void 0:t.profile)==null?void 0:H.avatarUrl,[s,i]=F.useState(null),r=F.useRef(null),{register:d,handleSubmit:g,formState:{errors:h},reset:C}=x2({mode:"onChange",resolver:C2(J)}),{ref:f,onChange:u,...v}=d("images"),M=h2();function R(){var n;(n=r==null?void 0:r.current)==null||n.click()}const{isPending:U,mutateAsync:I}=_({mutationKey:["create-thread"],mutationFn:async n=>{const m=new FormData;return m.append("content",n.content),n.images&&m.append("images",n.images[0]),(await N.post("/threads",m)).data},onError:n=>{var m,b;if(V(n))return P.create({title:(m=n.response)==null?void 0:m.statusText,type:"error",description:(b=n.response)==null?void 0:b.data.errors[0].message});P.create({title:"Something went wrong!",type:"error"})},onSuccess:async n=>{await M.invalidateQueries({queryKey:["threads"]}),P.create({title:n.message,type:"success"})}});async function L(n){await I(n),y()}function y(){C(),i("")}function w(n){if(n.target.files){const m=n.target.files[0],b=URL.createObjectURL(m);i(b)}}return{fullName:o,avatarUrl:l,previewURL:s,setPreviewURL:i,inputFileRef:r,register:d,handleSubmit:g,errors:h,registerImagesRef:f,registerImagesOnChange:u,restRegisterImages:v,isPending:U,onSubmit:L,onClickFile:R,handlePreview:w,clearForm:y}}const A2=()=>{var L,y;const{pathname:t}=O(),o=t==="/",{fullName:l,avatarUrl:s,previewURL:i,inputFileRef:r,register:d,handleSubmit:g,errors:h,registerImagesRef:C,registerImagesOnChange:f,restRegisterImages:u,isPending:v,onSubmit:M,onClickFile:R,handlePreview:U,clearForm:I}=D2();return e.jsxs(e2,{size:"sm",children:[e.jsx(t2,{asChild:!0,children:e.jsx(N2,{w:"2xs",alignSelf:"center",onClick:()=>I(),disabled:!o,children:"Create Post"})}),e.jsxs(g2,{children:[e.jsx(o2,{}),e.jsx(s2,{children:e.jsxs(i2,{bg:"bgSite.solid",children:[e.jsx(l2,{asChild:!0,children:e.jsx(x,{display:"flex",justifyContent:"end",px:"3",pt:"2",children:e.jsx(r2,{size:"2xs",variant:"ghost",justifyContent:"center",justifySelf:"end",rounded:"full",border:"1px solid #fff",color:"white"})})}),e.jsx(n2,{children:e.jsx("form",{onSubmit:g(M),children:e.jsxs(x,{display:"flex",flexDirection:"column",padding:"0px 0px",spaceY:2,children:[e.jsxs(x,{display:"flex",alignItems:"center",gap:"4",py:"2",borderBottom:"1px solid",borderColor:"bdr",children:[e.jsx(Z,{name:l||"",src:s||"",shape:"full",size:"full",width:"50px",height:"50px"}),e.jsxs(p2,{invalid:!!((L=h.content)!=null&&L.message),children:[e.jsx(a2,{color:"white",border:"none",placeholder:"What is happening?!",...d("content")}),e.jsx(m2,{children:(y=h.content)==null?void 0:y.message})]})]}),e.jsxs(x,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(S,{variant:"ghost",onClick:R,_hover:{bg:"initial"},children:e.jsx(j,{src:c2,width:"27px"})}),e.jsx(f2,{type:"file",hidden:!0,...u,onChange:w=>{U(w),f(w)},ref:w=>{C(w),r.current=w}}),e.jsx(S,{type:"submit",backgroundColor:"brand.solid",color:"white",w:"1/5",h:"8",rounded:"4xl",loading:!!v,children:e.jsx(a,{color:"white",fontSize:"xs",children:"Post"})})]}),e.jsx(x,{w:"full",display:"flex",justifyContent:"center",children:e.jsx(j,{objectFit:"contain",maxHeight:"200px",minW:"85%",rounded:"4xl",shadow:"1px 1px 8px 1px rgb(27, 205, 95) ",shadowColor:"green",src:i??""})})]})})})]})})]})]})};function H2(){const{data:t,isLoading:o,error:l,isFetched:s}=z({queryKey:["suggestion"],queryFn:async()=>{const i=await N.get("/users/suggest");return console.log("response",i),i.data}});return{data:t,isLoading:o,error:l,isFetched:s}}function T2({suggestion:t,...o}){const{isPending:l,onFollow:s}=w2(),{isPending:i,onUnFollow:r}=j2();return e.jsxs(x,{p:"2",display:"flex",spaceY:"1",spaceX:"1",borderBottom:"1px solid",borderColor:"bdr",...o,children:[e.jsx(Z,{name:t.profile.fullName||"",src:t.profile.avatarUrl||"",shape:"full",size:"xs"}),e.jsxs(x,{display:"flex",flexDirection:"column",gap:"1",flex:"10",children:[e.jsx(a,{fontWeight:"bold",color:"white",textStyle:"xs",children:t.profile.fullName}),e.jsxs(a,{color:"text.light",textStyle:"2xs",children:["@",t.username]})]}),e.jsx(S,{variant:"outline",alignSelf:"end",bg:"none",maxH:"7",color:"white",borderWidth:"1px",borderColor:"white",rounded:"3xl",alignItems:"center",flex:"2",disabled:l||i,onClick:()=>t.isFollowing?r({followedId:t.id}):s({followedId:t.id}),children:e.jsx(a,{textStyle:"2xs",color:"white",children:t.isFollowing?"Unfollow":"Follow"})})]})}function E2(){const{data:t,isLoading:o,isFetched:l}=H2();return e.jsxs(x,{children:[o&&e.jsx(x,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(q,{})}),l&&e.jsx(e.Fragment,{children:(t==null?void 0:t.length)!==0?e.jsx(e.Fragment,{children:t==null?void 0:t.map(s=>e.jsx(T2,{suggestion:s},s.id))}):e.jsx(x,{textAlign:"center",display:"flex",flexDir:"column",justifyContent:"center",children:e.jsx(a,{textStyle:"lg",fontWeight:"bold",color:"white",children:"No suggestion yet"})})})]})}const p0=W(function(){const{user:o,setUser:l,logout:s,startLoading:i,stopLoading:r}=k(),{isLoading:d,isError:g}=z({queryKey:["check-auth"],queryFn:async()=>{try{i();const h=B.get("token"),C=await N.post("/auth/check",{},{headers:{Authorization:`Bearer ${h}`}});return l(C.data.data.user),C.data}catch(h){throw console.log(h),B.remove("token"),s(),h}finally{r()}}});return d?e.jsx(c,{justify:"center",align:"center",height:"100vh",children:e.jsx(q,{size:"xl"})}):g?e.jsx(T,{to:"/login"}):o?e.jsxs(D,{templateColumns:"repeat(9,1fr)",children:[e.jsx(p,{colSpan:1,children:e.jsx(O2,{})}),e.jsx(p,{minHeight:"dvh",colSpan:{base:4,lg:5},borderX:"1px solid",borderColor:"bdr",children:e.jsx(X,{})}),e.jsx(p,{colSpan:3,children:e.jsx(z2,{})})]}):(console.log("something went wrong, navigate to login"),e.jsx(T,{to:"/login"}))});function O2(){const{pathname:t}=O(),{logout:o}=k(),l=G();function s(){o(),B.remove("token"),l("/login")}return e.jsxs(D,{templateRows:"repeat(6, 1fr)",h:"dvh",position:"sticky",top:"0",children:[e.jsx(p,{rowSpan:1,className:"nav-top",children:e.jsx(c,{h:"full",w:"full",justifyContent:"start",alignItems:"center",children:e.jsx(j,{src:$,minH:{base:"50%",lg:"50%",md:"30%"},maxH:"60%",px:"5"})})}),e.jsx(p,{rowSpan:4,className:"nav-middle",children:e.jsxs(c,{h:"full",flexDir:"column",spaceY:"5",pt:"5",children:[Z2.map(({label:i,logo:r,path:d},g)=>e.jsx(c,{px:5,children:e.jsx(L2,{asChild:!0,w:"full",children:e.jsx(Y,{to:d,children:e.jsxs(c,{w:"full",alignItems:"center",spaceX:"4",children:[e.jsx(j,{src:t===d?r.fill:r.outline,width:"10%"}),e.jsx(a,{fontSize:"1rem",color:"white",children:i})]})})},g)},g)),e.jsx(A2,{})]})}),e.jsx(p,{rowSpan:1,className:"nav-bottom",children:e.jsx(c,{h:"full",children:e.jsx(S,{bg:"none",rounded:"2xl",w:{base:"300px"},color:"#fff",onClick:s,justifyContent:"start",children:e.jsxs(x,{display:"flex",gapX:5,justifyContent:"start",alignItems:"center",children:[e.jsx(j,{src:B2,width:"30%"}),e.jsx(a,{children:"Logout"})]})})})})]})}function z2(){var o,l,s,i;const t=k(r=>r.user);return e.jsxs(D,{templateRows:"repeat(10,90px)",h:"full",position:"sticky",top:"0",spaceY:"5",p:"2.5vh",children:[e.jsx(p,{rowSpan:3,bg:"card",rounded:"l3",className:"left-card",p:"3",children:e.jsxs(c,{flexDir:"column",h:"full",children:[e.jsx(a,{color:"white",children:"My Profile"}),e.jsxs(c,{flexDir:"column",mt:"2",children:[e.jsxs(x,{position:"relative",h:"12vh",w:"full",bg:"white",alignSelf:"center",rounded:"lg",children:[e.jsx(c,{w:"full",maxH:"70px",rounded:"lg",children:e.jsx(j,{src:(t==null?void 0:t.profile.bannerUrl)??"",rounded:"lg",objectFit:"cover",objectPosition:"center"})}),e.jsx(b2,{placement:"bottom-start",offsetX:"10",children:e.jsx(Z,{name:((o=t==null?void 0:t.profile)==null?void 0:o.fullName)||"",src:(l=t==null?void 0:t.profile)==null?void 0:l.avatarUrl,size:"xl"})})]}),e.jsx(c,{justifyContent:"end",my:"2",children:e.jsx(u2,{})})]}),e.jsxs(c,{flexDir:"column",gap:"1",children:[e.jsx(a,{textStyle:"md",color:"white",children:((s=t==null?void 0:t.profile)==null?void 0:s.fullName)||""}),e.jsxs(a,{textStyle:"xs",color:"text.light",children:["@ ",(t==null?void 0:t.username)||""]}),e.jsx(a,{textStyle:"sm",color:"white",children:(i=t==null?void 0:t.profile)==null?void 0:i.bio}),e.jsxs(c,{gap:"2",textStyle:"sm",w:"full",children:[e.jsxs(c,{gap:"2",children:[e.jsx(a,{textStyle:"sm",color:"text.light",children:(t==null?void 0:t.followersCount)||"0"}),e.jsx(a,{textStyle:"sm",color:"text.light",children:"Followers"})]}),e.jsxs(c,{gap:"2",children:[e.jsx(a,{textStyle:"sm",color:"text.light",children:(t==null?void 0:t.followingCount)||"0"}),e.jsx(a,{textStyle:"sm",color:"text.light",children:"following"})]})]})]})]})}),e.jsxs(p,{rowSpan:4,bg:"card",rounded:"l3",p:"1.5vh",children:[e.jsx(a,{my:"0.5vh",textStyle:"sm",color:"white",children:"Suggested For you"}),e.jsx(E2,{})]}),e.jsx(p,{rowSpan:1,bg:"card",rounded:"l3"})]})}export{p0 as default};
